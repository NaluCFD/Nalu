#!/bin/bash

nalu_build_dir=/home/mhenryde/nalu-build-intel
trilinos_install_dir=$nalu_build_dir
yaml_install_dir=$nalu_build_dir
#superlu_inc_dir=$nalu_build_dir/SuperLU_4.3/include
#superlu_lib_dir=$nalu_build_dir/SuperLU_4.3/lib

EXTRA_ARGS=$@

# Cleanup old cache before we configure
# Note:  This does not remove files produced by make.  Use "make clean" for this.
find . -name "CMakeFiles" -exec rm -rf {} \;
rm -f CMakeCache.txt

cmake \
  -DTrilinos_DIR:PATH=$trilinos_install_dir \
  -DYAML_DIR:PATH=$yaml_install_dir \
  -DENABLE_INSTALL:BOOL=OFF \
  -DCMAKE_BUILD_TYPE=RELEASE \
  -DCMAKE_AR:FILEPATH=/nopt/intel/16.0/compilers_and_libraries_2016.2.181/linux/bin/intel64/xiar \
  -DCMAKE_LINKER:FILEPATH=/nopt/intel/16.0/compilers_and_libraries_2016.2.181/linux/bin/intel64/xild \
$EXTRA_ARGS \
../



#  -DSuperLU_INCLUDE_DIRS:PATH=$superlu_inc_dir \
# -DSuperLU_LIBRARY_DIRS:PATH=$superlu_lib_dir \
